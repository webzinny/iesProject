<!DOCTYPE html>
{%load static%}
<html>

<head>
    <meta charset="utf-8" />
    <title>IES | Student Adda</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
        integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="{%static 'css/logReg.css'%}">

</head>

<body>
    <header>
        <nav class="navbar navbar-expand-sm p-lg-3 p-sm-1">
            <a class="navbar-brand ml-lg-5 ml-sm-1" href="#">Student Adda</a>
            <button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse"
                data-target="#collapsibleNavId" aria-controls="collapsibleNavId" aria-expanded="false"
                aria-label="Toggle navigation">
                <i class="fa fa-bars" aria-hidden="true"></i>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavId">
                <ul class="navbar-nav ml-auto mt-2 p-3 mt-lg-0">
                    <li class="nav-item active mr-lg-5">
                        <a class="nav-link" href="home.html"><i class="fa fa-home"></i> Home <span
                                class="sr-only">(current)</span></a>
                    </li>

                </ul>

            </div>
        </nav>
        <img src="http://www.iesbpl.ac.in/uploads/about%20society.jpg"
            class="img-fluid ${3|rounded-top,rounded-right,rounded-bottom,rounded-left,rounded-circle,|} mx-auto d-block my-3"
            alt="ies logo">
        <!-- Button trigger modal -->
        <center>
            {%if msg%}
            <div class="alert alert-warning alert-dismissible fade show" role="alert" style="margin:0 10%">
                <button type="submit" class="close" data-dismiss="alert" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
                <br>
                <!---show error msg -->
                <h4><i class='fa fa-info'></i> {{msg}}</h4>
            </div>
            {%endif%}
            <div>
                <button type="button" class="btn btn-lg " style="margin-top:10px;" data-toggle="modal"
                    data-target="#loginModal">
                    Login <i class="fa fa-arrow-right"></i>
                </button>
            </div>
            <div>
                <button type="button" style="margin-top:25px;" class="btn btn-lg" data-toggle="modal"
                    data-target="#registerModel">
                    Register <i class="fa fa-arrow-right"></i>
                </button>
            </div>

        </center>

        <!--Login Modal -->
        <div class="modal fade" id="loginModal" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <svg id="wave" style="transform:rotate(180deg); transition: 0.3s" viewBox="0 0 1440 490"
                        version="1.1" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0">
                                <stop stop-color="rgba(7.689, 6.493, 118.354, 1)" offset="0%"></stop>
                                <stop stop-color="rgba(0, 255, 20.434, 1)" offset="100%"></stop>
                            </linearGradient>
                        </defs>
                        <path style="transform: translate(329px, 286px) rotateZ(-14deg); opacity:1"
                            fill="url(#sw-gradient-0)"
                            d="M0,196L26.7,163.3C53.3,131,107,65,160,49C213.3,33,267,65,320,114.3C373.3,163,427,229,480,245C533.3,261,587,229,640,236.8C693.3,245,747,294,800,310.3C853.3,327,907,310,960,253.2C1013.3,196,1067,98,1120,114.3C1173.3,131,1227,261,1280,269.5C1333.3,278,1387,163,1440,171.5C1493.3,180,1547,310,1600,310.3C1653.3,310,1707,180,1760,155.2C1813.3,131,1867,212,1920,212.3C1973.3,212,2027,131,2080,98C2133.3,65,2187,82,2240,138.8C2293.3,196,2347,294,2400,343C2453.3,392,2507,392,2560,367.5C2613.3,343,2667,294,2720,285.8C2773.3,278,2827,310,2880,334.8C2933.3,359,2987,376,3040,375.7C3093.3,376,3147,359,3200,367.5C3253.3,376,3307,408,3360,359.3C3413.3,310,3467,180,3520,138.8C3573.3,98,3627,147,3680,138.8C3733.3,131,3787,65,3813,32.7L3840,0L3840,490L3813.3,490C3786.7,490,3733,490,3680,490C3626.7,490,3573,490,3520,490C3466.7,490,3413,490,3360,490C3306.7,490,3253,490,3200,490C3146.7,490,3093,490,3040,490C2986.7,490,2933,490,2880,490C2826.7,490,2773,490,2720,490C2666.7,490,2613,490,2560,490C2506.7,490,2453,490,2400,490C2346.7,490,2293,490,2240,490C2186.7,490,2133,490,2080,490C2026.7,490,1973,490,1920,490C1866.7,490,1813,490,1760,490C1706.7,490,1653,490,1600,490C1546.7,490,1493,490,1440,490C1386.7,490,1333,490,1280,490C1226.7,490,1173,490,1120,490C1066.7,490,1013,490,960,490C906.7,490,853,490,800,490C746.7,490,693,490,640,490C586.7,490,533,490,480,490C426.7,490,373,490,320,490C266.7,490,213,490,160,490C106.7,490,53,490,27,490L0,490Z">
                        </path>
                    </svg>
                    <div class="modal-header">
                        <h5 class="modal-title text-center">Student Login</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <form action="login" method="post">
                                {%csrf_token%}

                                <input type="text" class="form-control mb-1" name="enroll" id="enroll"
                                    placeholder="Enrollment No." required>
                                <input type="password" class="form-control mb-1" name='pas' id='pas'
                                    placeholder="Password" required>

                                <button type="submit" class="btn login-btn btn-primary"><i
                                        class="fa fa-arrow-right"></i></button>

                                <a class='forgot' href='#'>Forgot ?</a>

                                <div class="alert alert-warning alert-dismissible fade hidden" role="alert">
                                    <button type="submit" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                    <br>
                                    <!---show error msg -->
                                    <strong><i class='fa fa-info'></i> Incorrect login details</strong>
                                </div>

                            </form>

                        </div>
                    </div>
                    <svg id="wave" style="transform:rotate(0deg); transition: 0.3s" viewBox="0 0 1440 450" version="1.1"
                        xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <linearGradient id="sw-gradient-0" x1="0" x2="0" y1="1" y2="0">
                                <stop stop-color="rgba(7.689, 6.493, 118.354, 1)" offset="0%"></stop>
                                <stop stop-color="rgba(0, 255, 20.434, 1)" offset="100%"></stop>
                            </linearGradient>
                        </defs>
                        <path style="transform: translate(343px, 257px) rotateZ(-14deg);" fill="url(#sw-gradient-0)"
                            d="M0,180L34.3,150C68.6,120,137,60,206,45C274.3,30,343,60,411,105C480,150,549,210,617,225C685.7,240,754,210,823,217.5C891.4,225,960,270,1029,285C1097.1,300,1166,285,1234,232.5C1302.9,180,1371,90,1440,105C1508.6,120,1577,240,1646,247.5C1714.3,255,1783,150,1851,157.5C1920,165,1989,285,2057,285C2125.7,285,2194,165,2263,142.5C2331.4,120,2400,195,2469,195C2537.1,195,2606,120,2674,90C2742.9,60,2811,75,2880,127.5C2948.6,180,3017,270,3086,315C3154.3,360,3223,360,3291,337.5C3360,315,3429,270,3497,262.5C3565.7,255,3634,285,3703,307.5C3771.4,330,3840,345,3909,345C3977.1,345,4046,330,4114,337.5C4182.9,345,4251,375,4320,330C4388.6,285,4457,165,4526,127.5C4594.3,90,4663,135,4731,127.5C4800,120,4869,60,4903,30L4937.1,0L4937.1,450L4902.9,450C4868.6,450,4800,450,4731,450C4662.9,450,4594,450,4526,450C4457.1,450,4389,450,4320,450C4251.4,450,4183,450,4114,450C4045.7,450,3977,450,3909,450C3840,450,3771,450,3703,450C3634.3,450,3566,450,3497,450C3428.6,450,3360,450,3291,450C3222.9,450,3154,450,3086,450C3017.1,450,2949,450,2880,450C2811.4,450,2743,450,2674,450C2605.7,450,2537,450,2469,450C2400,450,2331,450,2263,450C2194.3,450,2126,450,2057,450C1988.6,450,1920,450,1851,450C1782.9,450,1714,450,1646,450C1577.1,450,1509,450,1440,450C1371.4,450,1303,450,1234,450C1165.7,450,1097,450,1029,450C960,450,891,450,823,450C754.3,450,686,450,617,450C548.6,450,480,450,411,450C342.9,450,274,450,206,450C137.1,450,69,450,34,450L0,450Z">
                        </path>
                    </svg>
                </div>
            </div>
        </div>


        <!--Register Modal -->
        <div class="modal fade" id="registerModel" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
            aria-hidden="true">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title text-center">Register</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="container-fluid">
                            <form action="reg" method="post">
                                {%csrf_token%}
                                <div id="regInp">
                                <select class='clg form-control mb-1' name="branch">
                                    <option class='disabled'>--Branch--</option>
                                    <option value="CSE">Computer Science & Engineering</option>
                                    <option value="CE">Civil Engineering</option>
                                    <option value="EE">Electrical Engineering</option>
                                    <option value="ME">Mechanical Engineering</option>
                                    <option value="FT">Fire Technology</option>
                                </select>
                                <select class='branch form-control mb-1' name="sem">
                                    <option class='disabled'>--Semester--</option>
                                    <option value="1">1</option>
                                    <option value="2">2</option>
                                    <option value="3">3</option>
                                    <option value="4">4</option>
                                    <option value="5">5</option>
                                    <option value="6">6</option>
                                    <option value="7">7</option>
                                    <option value="8">8</option>
                                </select>
                                <select class='branch form-control mb-1' name="sec">
                                    <option class='disabled'>--Section--</option>
                                    <option value="A">Sec-A</option>
                                    <option value="B">Sec-B</option>
                                    <option value="C">Sec-C</option>
                                </select>
                                <br><br>
                                <input type="text" class="form-control mb-2" name="enroll" id="enrollReg"
                                    placeholder="Enrollment No." required>
                                    <input type="text" class="form-control mb-2" name="name" id="nameReg"
                                        placeholder="Your Name" required>

                                <input type="email" class="form-control mb-2" name='email'id="regEmail" placeholder="Email" required>

                                <input type="password" class="form-control mb-2" name='pas' id="pasReg"
                                    placeholder="Password" onchange="passValidate()"  required>

                                <input type="password" class="form-control mb-2" id='cnfPas'
                                  onchange="pasMatch()"  placeholder="Confirm Password" required>

                                </div>


                                  <div class='otp' id="otpEnter" style="display:none">
                                    <div class='otpVerify'>
                                        <div class="form-group">
                                          <p>An otp has been sent to your email:--</p>
                                          <input type="number" class="form-control" name="otp" id="otp" placeholder="OTP" onkeyup="verifyOtp()">
                                        </div>
                                    </div>
                                  </div>
                                  <center>
                                    <button type="button" id="verifyBtn" onclick="getOtp()" style="letter-spacing:2px;font-weight:500;" class="btn btn-disabled" disabled>
                                      Verify
                                    </button>
                                    <button type="submit" id="regBtn" style="letter-spacing:2px;font-weight:500;display:none" class="btn btn-success" disabled>
                                      Register
                                    </button>
                                  </center>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </header>
    <div id='about'>
        <div class="container">
        </div>
    </div>

    </section>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
        integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
        integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
        crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
        integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
        crossorigin="anonymous"></script>
    <script>
        $('#loginModal').on('show.bs.modal', event => {
            var button = $(event.relatedTarget);
            var modal = $(this);
        });
        var e = document.getElementById("pasReg");
        var btn=document.getElementById("verifyBtn");
        var ot="";
        function passValidate(){
          if (e.value.length<6 || e.value.length>19){
            e.style="outline-color:red;outline-style:auto";
          }else{
            e.style="outline-color:green;outline-style:auto";
          };
        };
        function pasMatch(){
          var cnfPas=document.getElementById('cnfPas');
          if(cnfPas.value===e.value){
            cnfPas.style="outline-color:green;outline-style:auto";
            btn.classList.remove("btn-disabled");
            btn.classList.add("btn-success");
            btn.disabled=false;
          }else{
            cnfPas.style="outline-color:red;outline-style:auto";
          }
        };

        function getOtp() {
          document.getElementById('otpEnter').style="display:block";
          document.getElementById('regInp').style="display:none";
          document.getElementById('regBtn').style="display:block";
          btn.style="display:none";
          let email=document.getElementById('regEmail').value;
          fetch("http://api.webzinny.in/st/getOtp?email="+email)
          .then((res)=>(res.json().then((data)=>(ot=data))
          ));
        };
        function verifyOtp(){
          let inp=document.getElementById('otp').value;
          if(inp===ot.otp){
            document.getElementById('regBtn').disabled=false;
          }
        }
    </script>
</body>

</html>
